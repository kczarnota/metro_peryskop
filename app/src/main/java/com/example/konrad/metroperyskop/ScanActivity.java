package com.example.konrad.metroperyskop;

import android.content.Intent;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.util.Log;
import android.view.SurfaceView;
import android.widget.TextView;

import com.android.volley.Request;
import com.android.volley.RequestQueue;
import com.android.volley.Response;
import com.android.volley.VolleyError;
import com.android.volley.toolbox.StringRequest;
import com.android.volley.toolbox.Volley;


import butterknife.BindView;
import butterknife.ButterKnife;
import github.nisrulz.qreader.QRDataListener;
import github.nisrulz.qreader.QREader;

public class ScanActivity extends AppCompatActivity
{
    public static final String IMG_KEY = "image.to.pass";
    public static final int STATION_OFFSET = 1;
    public static final int POINT_OFFSET = 2;

    private static final String TAG = ScanActivity.class.getSimpleName();

    @BindView(R.id.camera_view) SurfaceView mySurfaceView;
    private QREader qrEader;
    @BindView(R.id.text) TextView text;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_scan);
        ButterKnife.bind(this);

        qrEader = new QREader.Builder(this, mySurfaceView, new QRDataListener() {
            @Override
            public void onDetected(final String data) {
                Log.d("QREader", "Value : " + data);
                text.post(new Runnable() {
                    @Override
                    public void run() {
                        //text.setText(data);
                        getData(data);
                    }
                });
            }
        }).facing(QREader.BACK_CAM)
                .enableAutofocus(true)
                .height(mySurfaceView.getHeight())
                .width(mySurfaceView.getWidth())
                .build();

        qrEader.start();
    }

    private void getData(String data)
    {
        RequestQueue queue = Volley.newRequestQueue(this);
        String [] splitted =data.split(":");
        String url ="http://79.143.190.138:8080/station/" + splitted[STATION_OFFSET]
                + "/point/" + splitted[POINT_OFFSET];
        Log.d(TAG, "getData: " + url);

        // Request a string response from the provided URL.
        StringRequest stringRequest = new StringRequest(Request.Method.GET, url,
                new Response.Listener<String>() {
                    @Override
                    public void onResponse(String response) {
                        //TODO get image from http response
                        // Display the first 500 characters of the response string.
                        //mTextView.setText("Response is: "+ response.substring(0,500));

                    }
                }, new Response.ErrorListener() {
            @Override
            public void onErrorResponse(VolleyError error) {
                Log.d(TAG, "onErrorResponse: " + "That didnt work!");
            }
        });
        // Add the request to the RequestQueue.
        queue.add(stringRequest);


        Intent intent = new Intent(this, PhotoActivity.class);
        String image = "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L3/5S40ZM0YrV660u62wWb58ubZs2aK6ujq7W7HVkiVL9P777+sPf/iD3a1EjIULF6qsrEyffvqpYmJi7G4najACGEHa2tpUW1urrKws67bY2FhlZWWppqbGxs5gt+bmZklnwo+p2tvb9cYbb6ilpcXIj2vMy8tTdnZ2yO8H03z66adKTU3VTTfdpDlz5qihocHulsLut7/9rcaNG6ef/vSnSkpK0i233KJ//ud/trst27S1telf//VfNXfuXMLfRSIARpAvvvhC7e3tSk5ODrk9OTlZfr/fpq5gt46ODi1cuFC33XabRowYYXc7Ybd3715dd911cjqdmjdvnjZv3qz09HS72wqrN954Qx999JGKi4vtbsU2mZmZKikpUUVFhdauXatDhw7pjjvu0IkTJ+xuLaz+8z//U2vXrtWPfvQjbdu2TfPnz9df//Vf67XXXrO7NVts2bJFTU1NeuSRR+xuJerwuSlAhMvLy9O+ffuMPN9JkoYOHaq6ujo1NzfrN7/5jXJyclRdXW1MCDx8+LCefPJJVVZWKiEhwe52bDN9+nTr/6NGjVJmZqYGDBigTZs2GXU6QEdHh8aNG6df/epXkqRbbrlF+/bt07p165STk2Nzd+H361//WtOnT1dqaqrdrUQdRgAjyA033KC4uDg1NjaG3N7Y2KiUlBSbuoKd8vPzVVZWpt///vfq16+f3e3YwuFwaMiQIcrIyFBxcbFGjx6tVatW2d1W2NTW1urYsWMaO3as4uPjFR8fr+rqar388suKj49Xe3u73S3aIjExUTfffLM+++wzu1sJq759+573x8/w4cONPBz+3//933r33Xf12GOP2d1KVCIARhCHw6GMjAz5fD7rto6ODvl8PiPPeTJZMBhUfn6+Nm/erKqqKg0aNMjuliJGR0eHWltb7W4jbKZOnaq9e/eqrq7OWsaNG6c5c+aorq5OcXFxdrdoi5MnT+rgwYPq27ev3a2E1W233XbelFD/8R//oQEDBtjUkX02bNigpKQkZWdn291KVOIQcIQpKChQTk6Oxo0bpwkTJmjlypVqaWnRo48+andrYXPy5MmQv+oPHTqkuro69e7dW/3797exs/DJy8tTaWmp3nrrLfXq1cs6B9TtdqtHjx42dxc+hYWFmj59uvr3768TJ06otLRU27dv17Zt2+xuLWx69ep13rmfPXv2VJ8+fYw6J/Spp57SvffeqwEDBujIkSNatmyZ4uLi9OCDD9rdWlgtWrRIt956q371q1/pL//yL7V7926tX79e69evt7u1sOro6NCGDRuUk5Oj+HiizCUJIuL84z/+Y7B///5Bh8MRnDBhQnDXrl12txRWv//974OSzltycnLsbi1sunr9koIbNmywu7Wwmjt3bnDAgAFBh8MRvPHGG4NTp04NvvPOO3a3Zbuf/OQnwSeffNLuNsJq1qxZwb59+wYdDkfwz/7sz4KzZs0KfvbZZ3a3ZYu33347OGLEiKDT6QwOGzYsuH79ertbCrtt27YFJQXr6+vtbiVqMQ8gAACAYTgHEAAAwDAEQAAAAMMQAAEAAAxDAAQAADAMARAAAMAwBEAAAADDEAABAAAMQwAEAAAwDAEQAADAMARAAAAAwxAAAQAADEMABAAAMAwBEAAAwDAEQAAAAMMQAAEAAAxDAAQAADAMARAAAMAwBEAAAADDEAABAAAMQwAEAAAwDAEQAADAMARAAAAAwxAAAQAADEMABAAAMAwBEAAAwDAEQAAAAMMQAAEAAAxDAAQAADAMARAAAMAwBEAAAADDEAABAAAM838B0Ffso7xlPGoAAAAASUVORK5CYII=";
        intent.putExtra(IMG_KEY, image);
        startActivity(intent);
    }

    @Override
    protected void onResume() {
        super.onResume();
        qrEader.initAndStart(mySurfaceView);
    }

    @Override
    protected void onPause() {
        super.onPause();
        qrEader.releaseAndCleanup();
    }
}
